/* Native JavaScript for Bootstrap 5 | Base Component
----------------------------------------------------- */

import queryElement from 'shorter-js/src/misc/queryElement.js';
import normalizeOptions from 'shorter-js/src/misc/normalizeOptions.js';

export default class BaseComponent {
  constructor(name, target, defaults, config) {
    const self = this;
    const element = queryElement(target);

    if (element[name]) element[name].dispose();
    self.element = element;

    if (defaults && Object.keys(defaults).length) {
      self.options = normalizeOptions(element, defaults, (config || {}), 'bs');
    }
    element[name] = self;
  }

  dispose(name) {
    const self = this;
    self.element[name] = null;
    Object.keys(self).forEach((prop) => { self[prop] = null; });
  }
}
